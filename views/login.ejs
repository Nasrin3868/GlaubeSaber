<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Glaube Logistics | Saudi Import Specialists</title>
     <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
  <!-- SweetAlert2 JS -->
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: {
                            700: '#468ba9',  // deeper shade
                            600: '#549cbc',  // original main
                            500: '#68a8c3',  // slightly lighter
                            400: '#7bb4ca',  // even lighter
                            300: '#89B2C5',  // your existing lighter
                            200: '#a6c8d8',  // soft pastel
                            100: '#cde1eb',  // very light background
                            50:  '#f2f8fa'   //very very light bg
                        } ,
                        secondary: '#2c5282',
                        accent: '#549cbc',
                        light: '#f7fafc',
                        dark: '#2d3748',
                        lightbg:'#89B2C5'
                    },
                }
            }
        }
    </script>
 
    <style type="text/tailwindcss">
        @layer components {
            .btn-primary {
                @apply w-full py-2 bg-primary-600 hover:bg-primary-700 hover:shadow-lg text-white font-semibold rounded-full transition-colors;
            }
            .btn-outline {
                @apply w-full max-w-[200px] py-2 bg-transparent border-2 shadow-sm border-white text-white font-semibold rounded-full hover:bg-white hover:text-primary-600 hover:shadow-lg transition-colors;
            }
            .input-field {
                @apply w-full p-2 border border-primary-100 rounded focus:border-primary-600 focus:ring-1 focus:ring-primary-600 outline-none transition-colors text-sm;
            }
            .phone-select {
                @apply w-16 p-2 border border-primary-100 rounded focus:border-primary-600 focus:ring-1 focus:ring-primary-600 outline-none transition-colors text-sm;
            }
            
            /* Custom animation classes */
            .slide-left {
                animation: slideLeft 0.5s ease-in-out forwards;
            }
            .slide-right {
                animation: slideRight 0.5s ease-in-out forwards;
            }
            
            @keyframes slideLeft {
                from { transform: translateX(0); }
                to { transform: translateX(-100%); }
            }
            
            @keyframes slideRight {
                from { transform: translateX(-100%); }
                to { transform: translateX(0); }
            }
        }
    </style>
</head>
<body class="min-h-screen  flex items-center justify-center p-2 md:p-8 ">
    <div class="relative w-full max-w-4xl rounded-xl shadow-xl overflow-hidden min-h-[650px] md:min-h-[600px] ">
        <!-- Welcome Section (primary) -->
        <div id="welcomeSection" class="absolute top-0 left-0 w-full h-[180px] md:w-1/2 md:h-full bg-primary-600 z-20 flex flex-col items-center justify-center p-4 md:p-10 text-center text-white transition-all duration-500 ease-in-out">
            <div class="welcome-content max-w-xs w-full">
                <!-- <a href="/" class="flex items-center justify-center py-2 bg-primary-50 rounded-2xl">
                    <img src="/images/glaube-logistics-company-logo.png" 
                             alt="Audit process" >
                </a> -->
                <h2 id="welcomeTitle" class="text-xl md:text-3xl font-bold mb-2 md:mb-4">Welcome Back!</h2>
                <p id="welcomeText" class="text-sm md:text-base mb-4 md:mb-8">Already have an account? please login with your personal info</p>
                <button id="toggleSignin" class="btn-outline text-sm md:text-base">Login</button>
            </div>
        </div>

        <!-- Sign Up Form -->
        <div id="signupFormSection" class="absolute top-[180px] md:top-0 left-0 md:left-1/2 w-full md:w-1/2 h-[calc(100%-180px)] md:h-full bg-primary-50 z-10 flex flex-col justify-center p-6 md:p-10 transition-all duration-500 ease-in-out">
            <div class="w-full max-w-md mx-auto text-center">
                <h2 class="text-xl md:text-3xl font-bold text-gray-800 mb-1 md:mb-2">Create Account</h2>
                <p class="text-xs md:text-sm text-gray-600 mb-2 md:mb-6">Use your email and mobile number for registration</p>
                
                <form id="signupForm" class="space-y-3 md:space-y-4">
                    <div class="flex flex-col md:flex-row gap-2 md:gap-4">
                        <input type="text" id="firstName" placeholder="First Name" class="input-field" required>
                        <input type="text" id="lastName" placeholder="Last Name" class="input-field" required>
                    </div>
                    <div class="flex items-center gap-2">
                        <select class="phone-select" id="countrySelect" class="min-w-[200px]">
                            <option >+</option>
                            <option value="+93"  >Afghanistan +93</option>
                            <option value="+358" >Aland Islands +358</option>
                            <option value="+355" >Albania +355</option>
                            <option value="+213" >Algeria +213</option>
                            <option value="+1684">American Samoa +1684</option>
                            <option value="+376" >Andorra +376</option>
                            <option value="+244" >Angola +244</option>
                            <option value="+1264">Anguilla +1264</option>
                            <option value="+672" >Antarctica +672</option>
                            <option value="+1268">Antigua and Barbuda +1268</option>
                            <option value="+54"  >Argentina +54</option>
                            <option value="+374" >Armenia +374</option>
                            <option value="+297" >Aruba +297</option>
                            <option value="+61"  >Australia +61</option>
                            <option value="+43"  >Austria +43</option>
                            <option value="+994" >Azerbaijan +994</option>
                            <option value="+1242">Bahamas +1242</option>
                            <option value="+973" >Bahrain +973</option>
                            <option value="+880" >Bangladesh +880</option>
                            <option value="+1246">Barbados +1246</option>
                            <option value="+375" >Belarus +375</option>
                            <option value="+32"  >Belgium +32</option>
                            <option value="+501" >Belize +501</option>
                            <option value="+229" >Benin +229</option>
                            <option value="+1441">Bermuda +1441</option>
                            <option value="+975" >Bhutan +975</option>
                            <option value="+591" >Bolivia +591</option>
                            <option value="+599" >Bonaire, Sint Eustatius and Saba +599</option>
                            <option value="+387" >Bosnia and Herzegovina +387</option>
                            <option value="+267" >Botswana +267</option>
                            <option value="+55"  >Bouvet Island +55</option>
                            <option value="+55"  >Brazil +55</option>
                            <option value="+246" >British Indian Ocean Territory +246</option>
                            <option value="+673" >Brunei Darussalam +673</option>
                            <option value="+359" >Bulgaria +359</option>
                            <option value="+226" >Burkina Faso +226</option>
                            <option value="+257" >Burundi +257</option>
                            <option value="+855" >Cambodia +855</option>
                            <option value="+237" >Cameroon +237</option>
                            <option value="+1"   >Canada +1</option>
                            <option value="+238" >Cape Verde +238</option>
                            <option value="+1345">Cayman Islands +1345</option>
                            <option value="+236" >Central African Republic +236</option>
                            <option value="+235" >Chad +235</option>
                            <option value="+56"  >Chile +56</option>
                            <option value="+86"  >China +86</option>
                            <option value="+61"  >Christmas Island +61</option>
                            <option value="+672" >Cocos (Keeling) Islands +672</option>
                            <option value="+57"  >Colombia +57</option>
                            <option value="+269" >Comoros +269</option>
                            <option value="+242" >Congo +242</option>
                            <option value="+242" >Congo, Democratic Republic of the Congo +242</option>
                            <option value="+682" >Cook Islands +682</option>
                            <option value="+506" >Costa Rica +506</option>
                            <option value="+225" >Cote D'Ivoire +225</option>
                            <option value="+385" >Croatia +385</option>
                            <option value="+53"  >Cuba +53</option>
                            <option value="+599" >Curacao +599</option>
                            <option value="+357" >Cyprus +357</option>
                            <option value="+420" >Czech Republic +420</option>
                            <option value="+45"  >Denmark +45</option>
                            <option value="+253" >Djibouti +253</option>
                            <option value="+1767">Dominica +1767</option>
                            <option value="+1809">Dominican Republic +1809</option>
                            <option value="+593" >Ecuador +593</option>
                            <option value="+20"  >Egypt +20</option>
                            <option value="+503" >El Salvador +503</option>
                            <option value="+240" >Equatorial Guinea +240</option>
                            <option value="+291" >Eritrea +291</option>
                            <option value="+372" >Estonia +372</option>
                            <option value="+251" >Ethiopia +251</option>
                            <option value="+500" >Falkland Islands (Malvinas) +500</option>
                            <option value="+298" >Faroe Islands +298</option>
                            <option value="+679" >Fiji +679</option>
                            <option value="+358" >Finland +358</option>
                            <option value="+33"  >France +33</option>
                            <option value="+594" >French Guiana +594</option>
                            <option value="+689" >French Polynesia +689</option>
                            <option value="+262" >French Southern Territories +262</option>
                            <option value="+241" >Gabon +241</option>
                            <option value="+220" >Gambia +220</option>
                            <option value="+995" >Georgia +995</option>
                            <option value="+49"  >Germany +49</option>
                            <option value="+233" >Ghana +233</option>
                            <option value="+350" >Gibraltar +350</option>
                            <option value="+30"  >Greece +30</option>
                            <option value="+299" >Greenland +299</option>
                            <option value="+1473">Grenada +1473</option>
                            <option value="+590" >Guadeloupe +590</option>
                            <option value="+1671">Guam +1671</option>
                            <option value="+502" >Guatemala +502</option>
                            <option value="+44"  >Guernsey +44</option>
                            <option value="+224" >Guinea +224</option>
                            <option value="+245" >Guinea-Bissau +245</option>
                            <option value="+592" >Guyana +592</option>
                            <option value="+509" >Haiti +509</option>
                            <option value="+39"  >Holy See (Vatican City State) +39</option>
                            <option value="+504" >Honduras +504</option>
                            <option value="+852" >Hong Kong +852</option>
                            <option value="+36"  >Hungary +36</option>
                            <option value="+354" >Iceland +354</option>
                            <option value="+91"  >India +91</option>
                            <option value="+62"  >Indonesia +62</option>
                            <option value="+98"  >Iran, Islamic Republic of +98</option>
                            <option value="+964" >Iraq +964</option>
                            <option value="+353" >Ireland +353</option>
                            <option value="+44"  >Isle of Man +44</option>
                            <option value="+972" >Israel +972</option>
                            <option value="+39"  >Italy +39</option>
                            <option value="+1876">Jamaica +1876</option>
                            <option value="+81"  >Japan +81</option>
                            <option value="+44"  >Jersey +44</option>
                            <option value="+962" >Jordan +962</option>
                            <option value="+7"   >Kazakhstan +7</option>
                            <option value="+254" >Kenya +254</option>
                            <option value="+686" >Kiribati +686</option>
                            <option value="+850" >Korea, Democratic People's Republic of +850</option>
                            <option value="+82"  >Korea, Republic of +82</option>
                            <option value="+381" >Kosovo +381</option>
                            <option value="+965" >Kuwait +965</option>
                            <option value="+996" >Kyrgyzstan +996</option>
                            <option value="+856" >Lao People's Democratic Republic +856</option>
                            <option value="+371" >Latvia +371</option>
                            <option value="+961" >Lebanon +961</option>
                            <option value="+266" >Lesotho +266</option>
                            <option value="+231" >Liberia +231</option>
                            <option value="+218" >Libyan Arab Jamahiriya +218</option>
                            <option value="+423" >Liechtenstein +423</option>
                            <option value="+370" >Lithuania +370</option>
                            <option value="+352" >Luxembourg +352</option>
                            <option value="+853" >Macao +853</option>
                            <option value="+389" >Macedonia, the Former Yugoslav Republic of +389</option>
                            <option value="+261" >Madagascar +261</option>
                            <option value="+265" >Malawi +265</option>
                            <option value="+60"  >Malaysia +60</option>
                            <option value="+960" >Maldives +960</option>
                            <option value="+223" >Mali +223</option>
                            <option value="+356" >Malta +356</option>
                            <option value="+692" >Marshall Islands +692</option>
                            <option value="+596" >Martinique +596</option>
                            <option value="+222" >Mauritania +222</option>
                            <option value="+230" >Mauritius +230</option>
                            <option value="+262" >Mayotte +262</option>
                            <option value="+52"  >Mexico +52</option>
                            <option value="+691">Micronesia, Federated States of +691</option>
                            <option value="+373">Moldova, Republic of +373</option>
                            <option value="+377">Monaco +377</option>
                            <option value="+976">Mongolia +976</option>
                            <option value="+382">Montenegro +382</option>
                            <option value="+1664">Montserrat +1664</option>
                            <option value="+212">Morocco +212</option>
                            <option value="+258">Mozambique +258</option>
                            <option value="+95">Myanmar +95</option>
                            <option value="+264">Namibia +264</option>
                            <option value="+674">Nauru +674</option>
                            <option value="+977">Nepal +977</option>
                            <option value="+31">Netherlands +31</option>
                            <option value="+599">Netherlands Antilles +599</option>
                            <option value="+687">New Caledonia +687</option>
                            <option value="+64">New Zealand +64</option>
                            <option value="+505">Nicaragua +505</option>
                            <option value="+227">Niger +227</option>
                            <option value="+234">Nigeria +234</option>
                            <option value="+683">Niue +683</option>
                            <option value="+672">Norfolk Island +672</option>
                            <option value="+1670">Northern Mariana Islands +1670</option>
                            <option value="+47">Norway +47</option>
                            <option value="+968">Oman +968</option>
                            <option value="+92">Pakistan +92</option>
                            <option value="+680">Palau +680</option>
                            <option value="+970">Palestinian Territory, Occupied +970</option>
                            <option value="+507">Panama +507</option>
                            <option value="+675">Papua New Guinea +675</option>
                            <option value="+595">Paraguay +595</option>
                            <option value="+51">Peru +51</option>
                            <option value="+63">Philippines +63</option>
                            <option value="+64">Pitcairn +64</option>
                            <option value="+48">Poland +48</option>
                            <option value="+351">Portugal +351</option>
                            <option value="+1787">Puerto Rico +1787</option>
                            <option value="+974">Qatar +974</option>
                            <option value="+262">Reunion +262</option>
                            <option value="+40">Romania +40</option>
                            <option value="+7">Russian Federation +7</option>
                            <option value="+250">Rwanda +250</option>
                            <option value="+590">Saint Barthelemy +590</option>
                            <option value="+290">Saint Helena +290</option>
                            <option value="+1869">Saint Kitts and Nevis +1869</option>
                            <option value="+1758">Saint Lucia +1758</option>
                            <option value="+590">Saint Martin +590</option>
                            <option value="+508">Saint Pierre and Miquelon +508</option>
                            <option value="+1784">Saint Vincent and the Grenadines +1784</option>
                            <option value="+684">Samoa +684</option>
                            <option value="+378">San Marino +378</option>
                            <option value="+239">Sao Tome and Principe +239</option>
                            <option value="+966">Saudi Arabia +966</option>
                            <option value="+221">Senegal +221</option>
                            <option value="+381">Serbia +381</option>
                            <option value="+381">Serbia and Montenegro +381</option>
                            <option value="+248">Seychelles +248</option>
                            <option value="+232">Sierra Leone +232</option>
                            <option value="+65">Singapore +65</option>
                            <option value="+721">Sint Maarten +721</option>
                            <option value="+421">Slovakia +421</option>
                            <option value="+386">Slovenia +386</option>
                            <option value="+677">Solomon Islands +677</option>
                            <option value="+252">Somalia +252</option>
                            <option value="+27">South Africa +27</option>
                            <option value="+500">South Georgia and the South Sandwich Islands +500</option>
                            <option value="+211">South Sudan +211</option>
                            <option value="+34">Spain +34</option>
                            <option value="+94">Sri Lanka +94</option>
                            <option value="+249">Sudan +249</option>
                            <option value="+597">Suriname +597</option>
                            <option value="+47">Svalbard and Jan Mayen +47</option>
                            <option value="+268">Swaziland +268</option>
                            <option value="+46">Sweden +46</option>
                            <option value="+41">Switzerland +41</option>
                            <option value="+963">Syrian Arab Republic +963</option>
                            <option value="+886">Taiwan, Province of China +886</option>
                            <option value="+992">Tajikistan +992</option>
                            <option value="+255">Tanzania, United Republic of +255</option>
                            <option value="+66">Thailand +66</option>
                            <option value="+670">Timor-Leste +670</option>
                            <option value="+228">Togo +228</option>
                            <option value="+690">Tokelau +690</option>
                            <option value="+676">Tonga +676</option>
                            <option value="+1868">Trinidad and Tobago +1868</option>
                            <option value="+216">Tunisia +216</option>
                            <option value="+90" >Turkey +90</option>
                            <option value="+7370">Turkmenistan +7370</option>
                            <option value="+1649">Turks and Caicos Islands +1649</option>
                            <option value="+688" >Tuvalu +688</option>
                            <option value="+256" >Uganda +256</option>
                            <option value="+380" >Ukraine +380</option>
                            <option value="+971" >United Arab Emirates +971</option>
                            <option value="+44"  >United Kingdom +44</option>
                            <option value="+1"   >United States +1</option>
                            <option value="+1"   >United States Minor Outlying Islands +1</option>
                            <option value="+598" >Uruguay +598</option>
                            <option value="+998" >Uzbekistan +998</option>
                            <option value="+678" >Vanuatu +678</option>
                            <option value="+58"  >Venezuela +58</option>
                            <option value="+84"  >Viet Nam +84</option>
                            <option value="+1284">Virgin Islands, British +1284</option>
                            <option value="+1340">Virgin Islands, U.s. +1340</option>
                            <option value="+681" >Wallis and Futuna +681</option>
                            <option value="+212" >Western Sahara +212</option>
                            <option value="+967" >Yemen +967</option>
                            <option value="+260" >Zambia +260</option>
                            <option value="+263" >Zimbabwe +263</option>
                        </select>  
                        <input type="tel" placeholder="Contact Number" class="input-field" id="phoneInput" required>
                    </div>
                    <div>
                        <input type="email" placeholder="Email" class="input-field" required id="emailInput">
                        <p id="emailError" class="hidden text-xs text-red-500 text-left mt-1">Please enter a valid email address</p>
                    </div>
                    <!-- OTP Verification Area -->
                    <div id="otpVerificationArea" class="hidden space-y-2">
                        <p class="text-xs text-gray-500">We've sent an OTP to your email id</p>
                        <div class="flex items-center gap-2">
                            <input type="text" placeholder="Enter OTP" class="input-field" id="otpField">
                            <button type="button" id="resendOtpBtn" class="text-xs text-primary-600 whitespace-nowrap disabled:text-gray-400" disabled>
                                Resend OTP (30s)
                            </button>
                        </div>
                    </div>
                    
                    <button type="button" id="verifyBtn" class="w-full py-2 bg-primary-600 hover:bg-primary-700 hover:shadow-lg text-white rounded-full transition-colors text-sm">
                        Verify your email
                    </button>
                    
                    <input type="password" id="password" placeholder="Password" class="input-field" required>
                    <input type="password" id="confirmPassword" placeholder="Confirm Password" class="input-field" required>
                    <p id="passwordError" class="hidden text-xs text-red-500 text-left">**Passwords are not matching</p>
                    
                    <button type="submit" class="btn-primary mt-2 text-sm md:text-base">Sign Up</button>
                </form>
                <p class="text-xs md:text-sm text-gray-600 m-2 md:mb-6">Already have an account? <button id="toggleSignin1" class="hover:underline">Sign In</button></p>
            </div>
        </div>

        <!-- Sign In Form -->
        <div id="signinFormSection" class="absolute top-[180px] md:top-0 left-full md:left-0 w-full md:w-1/2 h-[calc(100%-180px)] md:h-full bg-primary-50 z-0 flex flex-col justify-center p-4 md:p-10 transition-all duration-500 ease-in-out">
            <div class="w-full max-w-md mx-auto text-center">
                <h2 class="text-xl md:text-3xl font-bold text-gray-800 mb-1 md:mb-2">Sign in to your account</h2>
                <p class="text-xs md:text-sm text-gray-600 mb-2 md:mb-6">Please enter your details</p>
                
                <form id="signinForm" class="space-y-3 md:space-y-4">
                    <div class="flex flex-col text-left">
                        <label for="username" class="text-sm md:text-base text-gray-500 mb-1">Email</label>
                        <input type="email" id="username" placeholder="Email" class="input-field" required>
                    </div>
                
                    <div class="flex flex-col text-left">
                        <label for="loginPass" class="text-sm md:text-base text-gray-500 mb-1">Password</label>
                        <input type="password" id="loginPass" placeholder="Password" class="input-field" required>
                    </div>
                    <button type="submit" class="btn-primary text-sm md:text-base">Login</button>
                </form>
                <button id="forgetPassword" class="hover:underline text-xs md:text-sm text-gray-600 m-2 md:mb-6">Forgot password?</button>
            </div>
        </div>
    </div>
 <%- include("partials/toast") -%>
<% if (toast) { %>
    <script>
        window.addEventListener('DOMContentLoaded', () => {
            showToast("<%= toast.message %>", "<%= toast.type %>");
        });
    </script>
    <% } %>
</body>
</html>
    <script>
        const container = document.querySelector('body > div');
        const welcomeSection = document.getElementById('welcomeSection');
        const signupFormSection = document.getElementById('signupFormSection');
        const signinFormSection = document.getElementById('signinFormSection');
        const toggleSigninBtn = document.getElementById('toggleSignin','toggleSignin1');
        const signupForm = document.getElementById('signupForm');
        const signinForm = document.getElementById('signinForm');
        const verifyBtn = document.getElementById('verifyBtn');
        const otpVerificationArea = document.getElementById('otpVerificationArea');
        const phoneInput = document.getElementById('phoneInput');
        
        const emailInput = document.getElementById('emailInput');
        const emailError = document.getElementById('emailError');
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        
        const otpField = document.getElementById('otpField');
        const resendOtpBtn = document.getElementById('resendOtpBtn');
        const welcomeTitle = document.getElementById('welcomeTitle');
        const welcomeText = document.getElementById('welcomeText');

        const passwordError = document.getElementById('passwordError');
        const forgetPassword=document.getElementById('forgetPassword')

        let isSigninActive = false;
        let otpCountdown = 30;
        let otpTimerInterval;

        const select = document.getElementById('countrySelect');

        select.addEventListener('change', function() {
            // Change the visible text in the select to only the code
            const code = this.value;
            this.options[this.selectedIndex].textContent = code;
        });

        // Verify OTP button click
        verifyBtn.addEventListener('click', async() => {
            //removing error red while validate input entered
            if (!validateEmail()) {
                return;
            }
            // If email is valid
            emailInput.classList.remove('border-red-500');
            emailError.classList.add('hidden');
            
            if (verifyBtn.classList.contains('verified')) {
                return;
            }
            if (otpVerificationArea.classList.contains('hidden')) {
                const email=emailInput.value.trim()
                console.log('email for sendOtp():',email);
                // First click - show OTP fields
                otpVerificationArea.classList.remove('hidden');
                verifyBtn.textContent = 'Verify';
                sendOtp(email)
                startOtpTimer();
                // Focus OTP input
                setTimeout(() => otpField.focus(), 100);
            } else {
                // Verify OTP
                if (!otpField.value) {
                    showToast('Please enter the OTP',"error")
                    return;
                }
                const otp=otpField.value.trim()
                console.log('otp from input field:',otp);
                
                 const verify=await verifyOTP(otp)
                 console.log('to check if its verified or not:',verify);
                 
                 if(verify){
                     // Simulate verification
                     verifyBtn.textContent = 'Verified ✓';
                     verifyBtn.disabled = true;
                     emailInput.disabled=true
                     verifyBtn.classList.remove('bg-primary-600', 'hover:bg-primary-700','hover:shadow-lg')
                     verifyBtn.classList.add('bg-primary-400')
                     otpVerificationArea.classList.add('hidden');
                     clearInterval(otpTimerInterval);
                 }else{
                    
                 }
                 
            }
        });

        // Resend OTP button click
        resendOtpBtn.addEventListener('click', () => {
            if (resendOtpBtn.disabled) return;
            // Simulate resending OTP
            otpField.value = '';
            const email=emailInput.value.trim()
            console.log(document.getElementById('emailInput').value);
            
            sendOtp(email)
            resendOtpBtn.disabled = true;
            resendOtpBtn.textContent = 'Resend OTP (30s)';
            otpCountdown = 30;
            startOtpTimer();
        });

        async function verifyOTP(otp){
            console.log('otp in verifyOTP func.:',otp)
            try {
                const response = await fetch("/verify-otp", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ otp: otp })
                });
                const data = await response.json();
            
                if (data.toast) {
                    showToast(data.toast.message, data.toast.type);
                }
                return data.success; 
            } catch (error) {
                console.error("Error:", error);
                showToast("Failed to verify OTP. Please try again.", "error");
                return false;
            }
        }

        function sendOtp(email){
            console.log('email:',email)
            fetch("/send-otp",{
                method:"POST",
                headers:{
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({ email: email })
            })
            .then(response=>response.json())
            .then(data=>{
                console.log("response after OTP sending through ajax");
                if(data.toast){
                    showToast(data.toast.message,data.toast.type)
                }
                if(data.success){
                    console.log('OTP send successfully',);
                    // showMessage('New OTP sent successfully', 'success');
                }else{
                    console.log('Error:',data.message);
                }
            })
            .catch(error => {
                    console.error("Error:", error);
                     showToast("Failed to resend OTP. Please try again.", "error");
            });
        }



        // Toggle between sign in and sign up
        [toggleSignin, toggleSignin1].forEach(btn => {
            btn.addEventListener('click', () => {
                isSigninActive = !isSigninActive;
                animateTransition();
                updateWelcomeContent();
            });
        })

        // Animate the transition between forms
        function animateTransition() {
            if (window.innerWidth >= 768) {
                // Desktop animation
                if (isSigninActive) {
                    welcomeSection.style.transform = 'translateX(100%)';
                    signupFormSection.style.transform = 'translateX(100%)';
                    signinFormSection.style.transform = 'translateX(0)';
                } else {
                    welcomeSection.style.transform = 'translateX(0)';
                    signupFormSection.style.transform = 'translateX(0)';
                    signinFormSection.style.transform = 'translateX(100%)';
                }
            } else {
                // Mobile animation
                if (isSigninActive) {
                    // signupFormSection.style.transform = 'translateX(100%)';
                    // signinFormSection.style.transform = 'translateX(0)';
                    signupFormSection.classList.add('slide-left');
                    signinFormSection.classList.add('slide-left');
                } else {
                    // signupFormSection.style.transform = 'translateX(0)';
                    // signinFormSection.style.transform = 'translateX(100%)';
                    signupFormSection.classList.remove('slide-left');
                    signinFormSection.classList.remove('slide-left');
                }
            }
        }

        // Form submission handlers
        signupForm.addEventListener('submit', (e) => {
            e.preventDefault();
            console.log(verifyBtn.textContent.trim() == 'Verified ✓');
            
            // if (!verifyBtn.classList.contains('Verified')) {
            if (verifyBtn.textContent.trim() !== 'Verified ✓') {
                showToast('Please verify your Email before form submission', 'error');
                return;
            }
            const password=document.getElementById('password').value.trim().toString()
            const confirmPassword=document.getElementById('confirmPassword').value.trim().toString()
        
            console.log('password:',password,confirmPassword,password==confirmPassword);
            
            if(password!==confirmPassword){ 
                passwordError.classList.remove('hidden')
                return
            }else{
                passwordError.classList.add('hidden')
            }
             const formData = {
                firstName: document.getElementById('firstName').value.trim(),
                lastName: document.getElementById('lastName').value.trim(),
                countryCode: signupForm.querySelector('.phone-select').value,
                phone: document.getElementById('phoneInput').value.trim(),
                email: document.getElementById('emailInput').value.trim(),
                password: password
            };
            console.log('formData:',formData);
            signup(formData)
            // isSigninActive = true;
            // animateTransition();
            // updateWelcomeContent();
        });
        async function signup(formData){
            try {
                const res = await fetch('/signup', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(formData)
                });
            
                const data = await res.json();
            
                if (data.toast) {
                    showToast(data.toast.message, data.toast.type);
                }
            
                if (data.success) {
                    // Success — redirect or show success message
                    signupForm.reset();
                    emailInput.disabled=false
                    verifyBtn.textContent = 'Verify your email';
                    verifyBtn.disabled=false
                    verifyBtn.classList.remove('bg-primary-400')
                    verifyBtn.classList.add('bg-primary-600', 'hover:bg-primary-700','hover:shadow-lg')

                }else{
                    emailInput.disabled=false
                    verifyBtn.textContent = 'Verify your email';
                    verifyBtn.disabled=false
                    verifyBtn.classList.remove('bg-primary-400')
                    verifyBtn.classList.add('bg-primary-600', 'hover:bg-primary-700','hover:shadow-lg')

                }
            } catch (error) {
                console.error('Signup error:', error);
                showToast('Something went wrong. Please try again.', 'error');
            }
        }
        signinForm.addEventListener('submit',async(e)=>{
            e.preventDefault();
            const formData = {
                username: document.getElementById('username').value.trim(),
                password: document.getElementById('loginPass').value.trim()
            };
            try{
                const res = await fetch('/signin', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(formData)
                });
                const data = await res.json();
                if (data.toast) {
                    showToast(data.toast.message, data.toast.type);
                }
            
                if (data.success) {
                    signinForm.reset();
                    window.location.href = "/";

                }else{
                    console.log('error from backend:',data.toast.message);
                }
            }
             catch (error) {
                console.error("Sign-in error:", error);
                showToast('catch error while submiting signinForm','error')
            }
        })

        forgetPassword.addEventListener('click',()=>{
            window.location.href = "/forgetPassword";
        })


        // Update welcome content based on state
        function updateWelcomeContent() {
            if (isSigninActive) {
                toggleSigninBtn.textContent = 'Register';
                welcomeTitle.textContent = 'Hello, Friend!';
                welcomeText.textContent = "Don't have an account? Enter your personal details and start journey with us";
            } else {
                toggleSigninBtn.textContent = 'Login';
                welcomeTitle.textContent = 'Welcome Back!';
                welcomeText.textContent = 'Already have an account? please login with your personal info';
            }
        }
        // Real-time validation while typing
        confirmPassword.addEventListener('input', function() {
            passwordError.classList.add('hidden')
        });
        emailInput.addEventListener('input', function() {
            validateEmail();
        });

        function validateEmail() {
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            const isValid = emailRegex.test(emailInput.value);

            if (isValid) {
                emailInput.classList.remove('border-red-500');
                emailError.classList.add('hidden');
            } else {
                emailInput.classList.add('border-red-500');
                emailError.classList.remove('hidden');
            }

            return isValid;
        }

        // Start OTP countdown timer
        function startOtpTimer() {
            otpCountdown = 30;
            resendOtpBtn.textContent = `Resend OTP (${otpCountdown}s)`;
            resendOtpBtn.disabled = true;
            clearInterval(otpTimerInterval);
            
            otpTimerInterval = setInterval(() => {
                otpCountdown--;
                resendOtpBtn.textContent = `Resend OTP (${otpCountdown}s)`;
                
                if (otpCountdown <= 0) {
                    clearInterval(otpTimerInterval);
                    resendOtpBtn.textContent = 'Resend OTP';
                    resendOtpBtn.disabled = false;
                }
            }, 1000);
        }

        // Reset verification if phone number changes
        emailInput.addEventListener('input', () => {
            if (verifyBtn.classList.contains('bg-primary-600') || !otpVerificationArea.classList.contains('hidden')) {
                verifyBtn.textContent = 'Verify your email';
                verifyBtn.classList.remove('bg-primary-600', 'hover:bg-primary-700', 'hover:shadow-lg' );
                verifyBtn.classList.add('bg-primary-600', 'hover:bg-primary-700', 'hover:shadow-lg' );
                otpVerificationArea.classList.add('hidden');
                clearInterval(otpTimerInterval);
                otpField.value = '';
            }
        });

        // Initialize mobile view
        function checkMobileView() {
            if (window.innerWidth < 768) {
                isSigninActive = false;
                signupFormSection.style.transform = 'translateX(0)';
                signinFormSection.style.transform = 'translateX(100%)';
                updateWelcomeContent();
            } else {
                // Reset desktop positions
                welcomeSection.style.transform = 'translateX(0)';
                signupFormSection.style.transform = 'translateX(0)';
                signinFormSection.style.transform = 'translateX(100%)';
            }
        }

        window.addEventListener('resize', checkMobileView);
        checkMobileView();
    </script>
